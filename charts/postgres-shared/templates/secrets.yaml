# =============================================================================
# POSTGRES-SHARED SECRETS
# =============================================================================
# Ces secrets sont distribués aux namespaces qui ont besoin d'accéder à PostgreSQL
# =============================================================================

---
# Secret principal dans le namespace infra
apiVersion: v1
kind: Secret
metadata:
  name: postgres-shared-secrets
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/name: postgres-shared
    app.kubernetes.io/managed-by: {{ .Release.Service }}
type: Opaque
stringData:
  postgres-password: "postgrespassword"
  admin-password: "adminpassword"
  airflow-password: "airflow_pass"
  openmetadata-password: "openmetadata_password"
  harbor-password: "harbor_password"
  nessie-password: "nessie_password"

---
# Secret pour OpenMetadata namespace
apiVersion: v1
kind: Secret
metadata:
  name: postgres-shared-secrets
  namespace: openmetadata
  labels:
    app.kubernetes.io/name: postgres-shared
    app.kubernetes.io/managed-by: {{ .Release.Service }}
type: Opaque
stringData:
  openmetadata-password: "openmetadata_password"
  airflow-password: "airflow_pass"

---
# Secret pour Harbor namespace
apiVersion: v1
kind: Secret
metadata:
  name: postgres-shared-secrets
  namespace: harbor
  labels:
    app.kubernetes.io/name: postgres-shared
    app.kubernetes.io/managed-by: {{ .Release.Service }}
type: Opaque
stringData:
  harbor-password: "harbor_password"

---
# Secret pour Nessie namespace
apiVersion: v1
kind: Secret
metadata:
  name: postgres-shared-secrets
  namespace: nessie
  labels:
    app.kubernetes.io/name: postgres-shared
    app.kubernetes.io/managed-by: {{ .Release.Service }}
type: Opaque
stringData:
  nessie-password: "nessie_password"

---
# Secret pour Trino namespace (pour les connecteurs PostgreSQL)
apiVersion: v1
kind: Secret
metadata:
  name: postgres-shared-secrets
  namespace: trino
  labels:
    app.kubernetes.io/name: postgres-shared
    app.kubernetes.io/managed-by: {{ .Release.Service }}
type: Opaque
stringData:
  openmetadata-password: "openmetadata_password"
  airflow-password: "airflow_pass"
  harbor-password: "harbor_password"
  nessie-password: "nessie_password"
